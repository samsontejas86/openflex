/* Dark Mode Theme */
.dark-mode {
    --bg-primary: #1a1a1a;
    --bg-secondary: #2a2a2a;
    --bg-tertiary: #333333;
    --text-primary: #e0e0e0;
    --text-secondary: #b0b0b0;
    --border-color: #404040;
    --card-bg: rgba(42, 42, 42, 0.8);
    --glass-bg: rgba(30, 30, 30, 0.7);
}

.dark-mode .main-page {
    background-color: var(--bg-primary);
}

.dark-mode .main-header {
    background-color: var(--bg-secondary);
    border-bottom-color: var(--border-color);
}

.dark-mode .header-logo {
    filter: brightness(1.2) contrast(1.1);
}

.dark-mode .header-title {
    color: var(--text-primary);
}

.dark-mode .header-menu,
.dark-mode .menu-item>span {
    color: var(--text-primary);
}

.dark-mode .dropdown-menu {
    background-color: var(--bg-tertiary);
    border-color: var(--border-color);
    backdrop-filter: blur(10px);
    background: rgba(42, 42, 42, 0.95);
}

.dark-mode .menu-option {
    color: var(--text-primary);
}

.dark-mode .menu-option:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

.dark-mode .menu-divider {
    background-color: var(--border-color);
}

.dark-mode .sidebar {
    background-color: var(--bg-secondary);
    border-right-color: var(--border-color);
}

.dark-mode .main-content.view-active {
    background-color: var(--bg-primary);
}

.dark-mode .empty-viewer {
    background-color: var(--bg-primary);
}

.dark-mode .image-viewer-container {
    background-color: var(--bg-primary);
}

.dark-mode .sidebar-item {
    color: var(--text-secondary);
}

.dark-mode .sidebar-item:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

.dark-mode .control-panel {
    background-color: var(--bg-primary);
    border-right-color: var(--border-color);
}

.dark-mode .control-section {
    background: var(--glass-bg);
    border-color: var(--border-color);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.dark-mode .section-header {
    color: var(--text-primary);
}

.dark-mode .section-header:hover {
    background-color: rgba(255, 255, 255, 0.05);
}

.dark-mode .section-content {
    border-top-color: var(--border-color);
}

.dark-mode .input-label {
    color: var(--text-secondary);
}

.dark-mode .coordinate-input {
    background-color: var(--bg-tertiary);
    border-color: var(--border-color);
    color: var(--text-primary);
}

.dark-mode .coordinate-input:focus {
    background-color: var(--bg-secondary);
}

.dark-mode .speed-btn {
    background-color: var(--bg-tertiary);
    border-color: var(--border-color);
    color: var(--text-secondary);
}

.dark-mode .speed-btn:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

.dark-mode .gallery-grid {
    background-color: var(--bg-primary);
}

.dark-mode .gallery-card {
    background: var(--glass-bg);
    border-color: var(--border-color);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.dark-mode .gallery-card:hover {
    background: rgba(42, 42, 42, 0.9);
    border-color: #505050;
}

.dark-mode .gallery-card.selected {
    background: rgba(214, 31, 105, 0.15);
    border-color: var(--primary-pink);
}

.dark-mode .gallery-filename {
    color: var(--text-primary);
}

.dark-mode .gallery-timestamp,
.dark-mode .gallery-more {
    color: var(--text-secondary);
}

.dark-mode .delete-btn {
    color: var(--text-secondary);
}

.dark-mode .microscope-viewer {
    background-color: #1a1a1a;
    border-color: var(--border-color);
}

.dark-mode .viewer-placeholder {
    color: var(--text-secondary);
}

.dark-mode .viewer-placeholder small {
    color: var(--text-secondary);
}

/* Theme Toggle Button */
.theme-toggle {
    margin-left: auto;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
    color: #666;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 6px;
}

.theme-toggle:hover {
    background-color: rgba(214, 31, 105, 0.1);
    color: var(--primary-pink);
    transform: rotate(15deg) scale(1.05);
}

.dark-mode .theme-toggle {
    color: var(--text-primary);
}

.dark-mode .theme-toggle:hover {
    background-color: rgba(214, 31, 105, 0.2);
    color: var(--primary-pink);
}

/* Glassmorphism Effects */
.glass-effect {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.dark-mode .glass-effect {
    background: rgba(30, 30, 30, 0.7);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Enhanced glassmorphism for cards */
.dark-mode .control-section,
.dark-mode .gallery-card {
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
}

.dark-mode .dropdown-menu {
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
}

/* Smooth theme transition - Enhanced for better performance */
.main-page,
.main-header,
.sidebar,
.control-panel,
.control-section,
.gallery-grid,
.gallery-card,
.dropdown-menu,
.menu-option,
.coordinate-input,
.speed-btn,
.sidebar-item,
.section-header,
.gallery-filename,
.gallery-timestamp,
.gallery-more,
.input-label,
.delete-btn,
.viewer-placeholder {
    transition: background-color 0.5s cubic-bezier(0.4, 0, 0.2, 1),
        color 0.5s cubic-bezier(0.4, 0, 0.2, 1),
        border-color 0.5s cubic-bezier(0.4, 0, 0.2, 1),
        box-shadow 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Smooth backdrop-filter transition */
.control-section,
.gallery-card,
.dropdown-menu {
    transition: background-color 0.5s cubic-bezier(0.4, 0, 0.2, 1),
        backdrop-filter 0.5s cubic-bezier(0.4, 0, 0.2, 1),
        border-color 0.5s cubic-bezier(0.4, 0, 0.2, 1),
        box-shadow 0.5s cubic-bezier(0.4, 0, 0.2, 1),
        transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Performance optimization */
.main-page {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
}